executor_environment: 
  interface: B2YamlInterpreter
  config:
    bucket_name: yaml_bucket
    endpoint_url: http://localhost:9000
    access_key_id: minioadmin
    secret_access_key: minioadmin
    prefix: jennifer
plan:
  - step: |-
      Here is the task:
      ```
      {{ task }}
      ```

      You have to complete the task by writing yaml file with two fields body and variables.
      
      In the variables field capture any text in the body field that must be referenced because it is changing value in the real world or it is not known at the time of writing the yaml file.

      {%- if mcp_servers and mcp_servers.values()|length > 0 %}
      These functions are used to insert text efficiently.
      {%- for server in mcp_servers.values() %}
        - {{ server.name }}: {{ server.description }}
            Takes inputs: {{server.inputs}}
            Returns an output of type: {{server.output_type}}
      {%- endfor %}
      {%- endif %}

      In the body field insert text to complete the task. You can use variable names as placeholders for the values that will be computed in the variables field.
      
      The body field should be text and the variables field must be a dictionary.

      Write the yaml file to complete the task.
    out_id: result_file
    action: final_answer
  - step: |-  
      Here is the task:
      ```
      {{task}}
      ```

      You came up with the following yaml result file:
      ```
      {{ result_file }}
      ```

      Please list the variables that are assumed to be created in the result file.
    out: one_to_many
    out_id: variable_list
    action: skip
    return_type: list
  - step: |-
      Here is the task:
      ```
      {{task}}
      ```

      Here are the text files in the datalake:
      ````
      {%- for file in files %}
        - File: : {{ file.name }}
          Description: {{ file.description }}
      {%- endfor %}
      ````

      {%- if mcp_servers and mcp_servers.values()|length > 0 %}
      These functions are used to complete a step efficiently.
      {%- for server in mcp_servers.values() %}
        - {{ server.name }}: {{ server.description }}
            Takes inputs: {{server.inputs}}
            Returns an output of type: {{server.output_type}}
      {%- endfor %}
      {%- endif %}

      You came up with the following result file:

      ```
      {{ result_file }}
      ```

      Create a description for the {{ variable_name }} variable which has clear instructions on how to write the yaml text to put in place of the variable in the result file.
    out_id: variable_description
    action: skip
  - step: |-
      Here is the task:
      ```
      {{ task }}
      ```

      Here are the text files in the datalake:
      ````
      {%- for file in files %}
        - File: : {{ file.name }}
          Description: {{ file.description }}
      {%- endfor %}
      ````

      {%- if mcp_servers and mcp_servers.values()|length > 0 %}
      These functions are used to complete a step efficiently.
      {%- for server in mcp_servers.values() %}
        - {{ server.name }}: {{ server.description }}
            Takes inputs: {{server.inputs}}
            Returns an output of type: {{server.output_type}}
      {%- endfor %}
      {%- endif %}

      You came up with the following result file:

      ```
      {{ result_file }}
      ```
      
      Here is the description of the {{ variable_name }} variable:
      ```
      {{ variable_description }}
      ```
      Write the yaml text to put in place of the variable in the result file.
    out_id: variable_yaml
