executor_environment: 
  interface: B2JinjaInterpreter
  config:
    bucket_name: jinja_bucket
    endpoint_url: http://localhost:9000
    access_key_id: minioadmin
    secret_access_key: minioadmin
    prefix: jennifer
plan:
  - step: |-
      Here is the task:
      ```
      {{ task }}
      ```

      You have to complete the task by writing a text report.
      
      You can use use curly braces to place variables in the text report like in a jinja template. 

      You must use variables to present information that is not known at the time of writing the report and it requires grounding in external data sources.
      
      The report must have a structure that is easy to read and understand.

      Write the text report with variables compatible with jinja template engine.
    out_id: result_file
    action: final_answer
  - step: |-  

      Here is the task:
      ```
      {{ task }}
      ```

      You have to complete the task by writing a text report.

      Here is the result file that you came up with:
      ```
      {{ result_file }}
      ```
      
      Please list the variables that are used in the jinja template.
    out: one_to_many
    out_id: variable_name
    action: skip
    return_type: list
  - step: |-
      Here is the task:
      ```
      {{task}}
      ```

      You came up with the following result file:
      ```
      {{ result_file }}
      ```

      {%- if mcp_servers and mcp_servers.values()|length > 0 %}
      These functions are can be used to compute a variable value.
      {%- for server in mcp_servers.values() %}
        - {{ server.name }}: {{ server.description }}
            Takes inputs: {{server.inputs}}
            Returns an output of type: {{server.output_type}}
      {%- endfor %}
      {%- endif %}

      {%- if files and files|length > 0 %}
      Here are the text files in the datalake which can also be used to compute a variable value:
      {%- for file in files %}

        - {{ file.name }}: {{ file.description }}
      {%- endfor %}
      {% endif %}
      
      Please write a detailed description of the {{ variable_name }} variable with clear instructions on how to compute the value using a function or a file.
    out_id: variable_description
    action: skip
  - step: |-
      Here is the variable description:
      ```
      {{ variable_description }}
      ```

      Here are the text files in the datalake:
      ````
      {%- for file in files %}
        - File: : {{ file.name }}
          Description: {{ file.description }}
      {%- endfor %}
      ````

      {%- if mcp_servers and mcp_servers.values()|length > 0 %}
      These functions are used to complete a step efficiently.
      {%- for server in mcp_servers.values() %}
        - {{ server.name }}: {{ server.description }}
            Takes inputs: {{server.inputs}}
            Returns an output of type: {{server.output_type}}
      {%- endfor %}
      {%- endif %}

      You have to write a jinja template file making use of function calls and file names stated as yaml variables to compute the value of the {{ variable_name }} variable.
    out_id: variable_yaml
